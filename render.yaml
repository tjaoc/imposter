# Blueprint Render: 1 proyecto, 2 entornos (plan gratuito)
# Proyecto "imposter" con environments: production, development.
# Dominios personalizados: añádelos después en Dashboard → cada servicio → Settings → Custom Domains.

projects:
  - name: imposter
    environments:
      # ——— Producción ———
      - name: production
        services:
          - type: web
            runtime: node
            name: imposter-api-prod
            rootDir: backend
            buildCommand: npm install
            startCommand: npm start
            healthCheckPath: /health
            envVars:
              - key: NODE_ENV
                value: production
              - key: MONGODB_URI
                sync: false
              - key: CORS_ORIGIN
                value: https://impostor.netic.app

          - type: web
            runtime: static
            name: imposter-app-prod
            rootDir: frontend
            buildCommand: npm install && npm run build
            staticPublishPath: dist
            routes:
              - type: rewrite
                source: /*
                destination: /index.html
            envVars:
              - key: VITE_API_URL
                value: https://apiimp.netic.app
              - key: VITE_SOCKET_URL
                value: https://apiimp.netic.app

      # ——— Desarrollo ———
      - name: development
        services:
          - type: web
            runtime: node
            name: imposter-api-dev
            rootDir: backend
            buildCommand: npm install
            startCommand: npm start
            healthCheckPath: /health
            envVars:
              - key: NODE_ENV
                value: development
              - key: MONGODB_URI
                sync: false
              - key: CORS_ORIGIN
                value: https://impostor.netic.dev

          - type: web
            runtime: static
            name: imposter-app-dev
            rootDir: frontend
            buildCommand: npm install && npm run build
            staticPublishPath: dist
            routes:
              - type: rewrite
                source: /*
                destination: /index.html
            envVars:
              - key: VITE_API_URL
                value: https://apiimp.netic.dev
              - key: VITE_SOCKET_URL
                value: https://apiimp.netic.dev
