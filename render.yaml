# Blueprint Render — Plan Hobby (gratuito)
# Según https://render.com/pricing el plan Hobby incluye:
#   - 1 project with 2 environments
#   - Static Sites $0/mes, Web Services Free $0/mes
#   - Custom domains: hasta 2 (añadirlos en Dashboard si los necesitas)
# Variables MONGODB_URI, CORS_ORIGIN, VITE_*: configurar en Dashboard tras el deploy.

projects:
  - name: imposter
    environments:
      - name: production
        services:
          - type: web
            runtime: node
            name: imposter-api-prod
            rootDir: backend
            buildCommand: npm install
            startCommand: npm start
            healthCheckPath: /health
            envVars:
              - key: NODE_ENV
                value: production
              - key: MONGODB_URI
                sync: false
              - key: CORS_ORIGIN
                value: https://impostor.netic.app

          - type: web
            runtime: static
            name: imposter-app-prod
            rootDir: frontend
            buildCommand: npm install && npm run build
            staticPublishPath: dist
            routes:
              - type: rewrite
                source: /*
                destination: /index.html
            envVars:
              - key: VITE_API_URL
                value: https://apiimp.netic.app
              - key: VITE_SOCKET_URL
                value: https://apiimp.netic.app

      - name: development
        services:
          - type: web
            runtime: node
            name: imposter-api-dev
            rootDir: backend
            buildCommand: npm install
            startCommand: npm start
            healthCheckPath: /health
            envVars:
              - key: NODE_ENV
                value: development
              - key: MONGODB_URI
                sync: false
              - key: CORS_ORIGIN
                value: https://impostor.netic.dev

          - type: web
            runtime: static
            name: imposter-app-dev
            rootDir: frontend
            buildCommand: npm install && npm run build
            staticPublishPath: dist
            routes:
              - type: rewrite
                source: /*
                destination: /index.html
            envVars:
              - key: VITE_API_URL
                value: https://apiimp.netic.dev
              - key: VITE_SOCKET_URL
                value: https://apiimp.netic.dev
